<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>RunItUp ‚Äî Support</title>
    <!-- Optional Spring Security CSRF meta (filled by Thymeleaf if you use it) -->
    <meta name="_csrf" content=""/>
    <meta name="_csrf_header" content="X-CSRF-TOKEN"/>
    <style>
        :root {
            --bg: #0b0c10; --bg2:#0f1016; --panel: #12131a; --text: #e8ecf1; --muted: #a8b0bd;
            --accent:#ff6a00; --accent-2:#ff9a3c; --border:#212432; --link:#7ab6ff;
        }
        *{box-sizing:border-box}
        html, body { height: 100%; }
        body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
            background: linear-gradient(180deg, var(--bg) 0%, var(--bg2) 100%);
            color: var(--text); line-height: 1.6; }
        a { color: var(--link); text-decoration: none; }
        a:hover { text-decoration: underline; }

        /* Nav (matches homepage) */
        .nav{position:sticky;top:0;z-index:40;background:rgba(11,12,16,.8);backdrop-filter:saturate(160%) blur(10px);border-bottom:1px solid var(--border)}
        .nav .inner{max-width:980px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:10px 12px}
        .logo{display:flex;align-items:center;gap:10px;font-weight:800}
        .logo-badge{display:inline-grid;place-items:center;width:28px;height:28px;border-radius:8px;background:linear-gradient(135deg,var(--accent),var(--accent-2));color:#111}
        .nav a.btn{padding:10px 14px;border:1px solid var(--border);border-radius:12px;color:var(--text)}

        .wrap{max-width:980px;margin:0 auto;padding:24px 20px}
        header { margin: 8px 0 12px; text-align: center; }
        h1 { font-size: clamp(28px, 5vw, 40px); margin: 0 0 8px; letter-spacing: 0.2px; }
        .subtitle { color: var(--muted); font-size: 15px; }

        .panel { background: var(--panel); border: 1px solid var(--border); border-radius: 16px; padding: 24px; margin-top:16px; }
        h2 { margin-top: 16px; font-size: 20px; }

        .contact-grid { display: grid; gap: 16px; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); }
        .contact-card { background: #141624; border: 1px solid var(--border); border-radius: 14px; padding: 18px; }
        .contact-card h3 { margin-top: 0; }
        .faq { margin-top:16px; }
        details { background: var(--panel); border: 1px solid var(--border); border-radius: 12px; padding: 12px; margin-bottom: 10px; }
        summary { cursor: pointer; font-weight: 700; }

        form { display: grid; gap: 12px; margin-top: 12px; }
        input, textarea { width: 100%; border-radius: 10px; border: 1px solid var(--border); padding: 12px; background: #0f1016; color: var(--text); }
        button { background: linear-gradient(90deg,var(--accent),var(--accent-2)); color: #111; border: none; border-radius: 12px; padding: 12px 18px; font-weight:800; cursor:pointer; }
        button:hover { opacity: .95; }

        .alert { display:none; border:1px solid var(--border); border-radius:12px; padding:10px 12px; margin-top:10px; }
        .alert.ok { background:#132318; border-color:#214d2f; color:#b9f6ca; }
        .alert.err { background:#27171a; border-color:#5a2730; color:#ffcdd2; }

        footer { margin-top: 32px; color: var(--muted); font-size: 13px; text-align: center; padding: 24px 0; border-top:1px solid var(--border); }
        /* Mobile tweaks */
        @media (max-width: 520px) {
            .nav .inner{padding:12px 14px}
            .logo-badge{width:26px;height:26px}
            .wrap{padding:16px}
            header{margin:4px 0 8px}
            h1{font-size:28px}
            .subtitle{font-size:14px}
            .panel{padding:16px;border-radius:14px}
            .contact-grid{grid-template-columns:1fr;gap:12px}
            .contact-card{padding:14px;border-radius:12px}
            input, textarea{font-size:16px; /* avoid iOS zoom */}
            button{width:100%;padding:14px;border-radius:14px}
            details{padding:10px}
            summary{font-size:15px}
            footer{padding:16px 0}
        }
        /* Safe area for notches */
        .nav{padding-top: env(safe-area-inset-top)}
        body{padding-bottom: env(safe-area-inset-bottom)}
    </style>
</head>
<body>
<nav class="nav">
    <div class="inner">
        <div class="logo"><span class="logo-badge">üèÄ</span> RunItUp</div>
        <div style="display:flex; gap:8px; align-items:center;">
            <a class="btn" href="/">Home</a>
            <a class="btn" href="/terms-and-conditions">Terms</a>
            <a class="btn" href="/privacy">Privacy</a>
        </div>
    </div>
</nav>

<div class="wrap">
    <header>
        <h1>Support Center</h1>
        <div class="subtitle">Need help? We‚Äôre here to assist with your RunItUp experience.</div>
    </header>

    <section class="panel">
        <h2>Contact Us</h2>
        <div class="contact-grid">
            <div class="contact-card">
                <h3>üìß Email Support</h3>
                <p>Reach our team via email and we‚Äôll respond within 24‚Äì48 hours.</p>
                <p><a href="mailto:support@runit-up.com">support@runit-up.com</a></p>
            </div>
            <div class="contact-card">
                <h3>üí¨ Chat</h3>
                <p>Use the in‚Äëapp chat to message our support team during business hours (Mon‚ÄìFri, 9AM‚Äì6PM CST).</p>
            </div>
            <div class="contact-card">
                <h3>üìç Mailing Address</h3>
                <p>RunItUp, Inc.<br>123 Example Ave<br>Chicago, IL 60601, USA</p>
            </div>
        </div>
    </section>

    <section class="panel faq">
        <h2>Frequently Asked Questions</h2>
        <details>
            <summary>How do I reset my password?</summary>
            <p>Open the RunItUp app, tap <strong>Login ‚Üí Forgot Password</strong>, and follow the instructions. You‚Äôll receive an email or SMS with a reset link.</p>
        </details>
        <details>
            <summary>I can‚Äôt join a run. What should I do?</summary>
            <p>Make sure the run isn‚Äôt full or past its start time. If you‚Äôre still having trouble, contact <a href="mailto:support@runit-up.com">support@runit-up.com</a>.</p>
        </details>
        <details>
            <summary>How do I request a refund?</summary>
            <p>Refund policies vary by host. Go to <strong>My Runs ‚Üí Past or Upcoming Runs</strong>, select the session, and tap <strong>Request Refund</strong>. If your request window is open, it will process automatically.</p>
        </details>
        <details>
            <summary>Can I change my booking or guest count?</summary>
            <p>You can modify your party size or guest info while the run status is <strong>Pending</strong> or <strong>Confirmed</strong>. Once the run starts, changes are locked.</p>
        </details>
    </section>

    <section class="panel">
        <h2>Submit a Request</h2>
        <p>Have an issue or feedback? Send us a message below.</p>
        <form id="supportForm">
            <input type="text" name="name" placeholder="Your name" required>
            <input type="email" name="email" placeholder="Email address" required>
            <textarea name="description" rows="5" placeholder="Describe your issue or question" required></textarea>
            <button type="submit">Send Message</button>
        </form>
        <div id="ok" class="alert ok">Thank you! Your request has been sent.</div>
        <div id="err" class="alert err">We couldn't send your message. Please try again.</div>
    </section>
</div>

<footer>
    <div class="wrap" style="text-align:center">
        <div>¬© <span id="year"></span> RunItUp, Inc. All rights reserved.</div>
        <div style="margin-top:8px">
            <a href="/terms-and-conditions">Terms & Conditions</a> ¬∑ <a href="/privacy">Privacy Policy</a> ¬∑ <a href="/">Home</a>
        </div>
    </div>
</footer>

<script>
    // Year stamp
    document.getElementById('year').textContent = new Date().getFullYear();

    // CSRF helpers (if you serve meta via Thymeleaf)
    function csrfHeaders(){
        const token = document.querySelector('meta[name="_csrf"]')?.getAttribute('content');
        const header = document.querySelector('meta[name="_csrf_header"]')?.getAttribute('content');
        return (token && header) ? { [header]: token } : {};
    }

    async function postJson(url, data, extraHeaders={}){
        const res = await fetch(url, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json', 'Accept': 'application/json', ...extraHeaders },
            body: JSON.stringify(data)
        });
        return res;
    }

    const form = document.getElementById('supportForm');
    const okMsg = document.getElementById('ok');
    const errMsg = document.getElementById('err');

    form?.addEventListener('submit', async (e) => {
        e.preventDefault();
        okMsg.style.display = 'none';
        errMsg.style.display = 'none';

        const data = {
            name: form.elements['name'].value.trim(),
            email: form.elements['email'].value.trim(),
            description: form.elements['description'].value.trim()
        };

        if (!data.name || !data.email || !data.description) {
            errMsg.textContent = 'Please complete all fields.';
            errMsg.style.display = 'block';
            return;
        }

        try {
            const res = await postJson('/api/v1/support/create', data, csrfHeaders());
            if (!res.ok) throw new Error(await res.text());
            form.reset();
            okMsg.style.display = 'block';
        } catch (err) {
            errMsg.style.display = 'block';
        }
    });
</script>
</body>
</html>
